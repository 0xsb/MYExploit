package com.achuna33.Controllers;

import com.achuna33.UI.UIController;
import com.achuna33.Utils.Cache;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class Controller {
    public static Boolean FileOrLogArea = false;
    public static void WriteLog(String text){
        if (Cache.uiController.targetAddress.getText().startsWith("file:")){
            System.out.println(Thread.currentThread().getId());
            String id = String.valueOf(Thread.currentThread().getId()) ;
            String path = Cache.ThreadIdForLog.get(id);
            WriteLog2File(path,text);
        }else {
            Cache.uiController.logTextArea.appendText(text);
        }
    }
    public static void WriteExpLog(String text){
        Cache.uiController.PublicArea.appendText(text);
    }
    public static void WriteLog2File(String filePath,String Content) {
        FileWriter fw = null;
        try {
            //如果文件存在，则追加内容；如果文件不存在，则创建文件
            filePath = java.net.URLDecoder.decode(filePath,"UTF-8");
            if (System.getProperties().getProperty("os.name").toLowerCase().contains("mac os")){
                filePath = "/" + filePath;
            }
            File f=new File(filePath);
            if (!f.exists()){
                f.createNewFile();
            }
            fw = new FileWriter(f, true);
        } catch (IOException e) {
            e.printStackTrace();
        }
        PrintWriter pw = new PrintWriter(fw);
        pw.println(Content);
        pw.flush();
        try {
            fw.flush();
            pw.close();
            fw.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

}
